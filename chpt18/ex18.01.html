<!DOCTYPE html>
<html>
<head>
	<title>Ex 18.01</title>
	<script type="text/javascript" src="ajaxRqst.js"></script>
	<script type="text/javascript">
		function ajaxRqstFileText(url) {
			var ajr = newAjaxRqst();
			var method = "GET";
			var async = true;
			ajr.open(method, url, async);
			ajr.setRequestHeader("Cache-Control", "no-cache");
			ajr.send(null);
			ajr.onreadystatechange = function() { rqstCallback(ajr); };
		}
		function rqstCallback(ajaxRqst) {
			console.log("called rqstCallback()");
			if (ajaxRqst.readyState == XMLHttpRequest.DONE && 
				ajaxRqst.status == 200) {

				var fileText = ajaxRqst.responseText;
				var divRef = document.getElementById("showFileText");
				divRef.innerHTML = "<p>" + fileText + "</p>";
			}
		}
	</script>
</head>
<body>
<a href="#" onclick="ajaxRqstFileText('http://localhost/chpt18/simple.txt')">Get simple.txt from server</a>
<hr />
<div id="showFileText">
</div>
</body>
</html>